## Elastic Load Balancers - Part 1

- types of load balancers and which protocols they support
- Classic Load Balancer (v1)
  - need distinct SSL certificates for each
  - Subject Alternate Name (SAN) vs Server Name Indication (SNI) for Application Load Balancer (ALB)
  - SSL authentication happens on EC2 instance
- Application Load Balancer (v2)
  - load balance multiple applications on same machine (containers)
  - great for ECS integration
  - can do more complex things, like route to Target Groups based on query params
  - Target Groups
    - EC2 instances (managed by an Auto Scaling Group??? Alternatives???)
    - ECS tasks
    - Lambda functions
    - IP Addresses (must be private IPs)
- Network Load Balancer (Layer 4)
  - forwards TCP and UDP traffic to instances
  - high performance
  - one static IP per AZ
    - use Elastic IP for whitelisting???
  - NOT available in AWS free tier
  - Target Groups
    - EC2 instances
    - IP Addresses
    - Application Load Balancer??? (very common pattern)
      - keep static IP but use Layer 7 features of ALB
  - Regional NLB DNS returns IP for each enabled AZ of the NLB
  - Zonal DNS Name (prefixed AZ name) gives single NLB node IP
    - avoids data transfer costs and reduces latency
    - would need to implement app-specific logic
- Gateway Load Balancer (Layer 3, works on packets)
  - virtual appliance (VA) are preconfigured software solution, often packaged as a Virtual Machine Image (VMI) (AMI), that provides specific functionalities similar to a physical appliance
  - functions
    - Transparent Network Gateway (single entry/exit)
    - Load Balancer (to virtual appliances)
  - GENEVE protocol on port 6081
    - UDP port all traffic is sent to
    - adds headers to network packets to create virtual networks over existing infra
    - headers then get stripped off and packet is routed to destination within the virtual network
  - Target Groups
    - EC2 instances
    - IP addresses (must be private IPs)
