## SQS

- serverless, managed queue with IAM integration
- decouples services so they can scale independently
- max message size of 256KB!!! use S3 pointer!!!
- common to use SQS as a write buffer for DynamoDB
- SQS FIFO has 300 messages per second standard or 3000 mps with batching
- Dead Letter Queue (DLQ)
    - fail to process in Visibility Timeout, message goes back to queue
    - if MaximumReceives threshold exceeded, send message to DLQ
    - DLQ must be same FIFO or Non-FIFO type as source queue
    - can debug, then redrive the DLQ without any custom code
- consumers need to be idempotent since events can be delivered multiple times
- Event Source Mapping to connect a Lambda to SQS queue
    - specify batch size 1-10
    - queue visibility timeout should be 6x the timeout of your Lambda Function
    - DLQ should be attached to SQS Queue, not the Lambda
        - Lambdas can have DLQs for their async invocations
    - could also use Lambda destination for failures
- request / response queue solution architecture (just an example)
    - gives decoupled scaling
    - fault tolerance
    - load balancing
